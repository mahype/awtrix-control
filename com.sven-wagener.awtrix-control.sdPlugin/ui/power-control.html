<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Power Control Settings</title>
    <script src="https://sdpi-components.dev/releases/v4/sdpi-components.js"></script>
    <script src="../lib/awtrixScan.js"></script>
    <script src="../js/awtrix3.js"></script>
    <script src="power-control.js"></script>
    <style>
        .scan-status {
            margin-top: 10px;
            padding: 8px;
            border-radius: 4px;
            background-color: #2d2d2d;
            color: #ddd;
            display: none;
        }
        .terminal-output {
            margin-top: 5px;
            padding: 8px;
            border-radius: 4px;
            background-color: #2d2d2d;
            color: #ddd;
            max-height: 150px;
            overflow-y: auto;
            display: none;
        }
        .found-device {
            margin: 3px 0;
        }
        .found-device::before {
            content: "• ";
        }
    </style>
</head>
<body>
    <sdpi-item label="Action">
        <sdpi-select setting="action" value="toggle">
            <option value="toggle">Toggle Power</option>
            <option value="on">Turn On</option>
            <option value="off">Turn Off</option>
        </sdpi-select>
    </sdpi-item>
    
    <sdpi-item label="Device">
        <sdpi-select setting="device">
            <!-- Additional options will be populated dynamically -->
        </sdpi-select>
    </sdpi-item>
    
    <sdpi-item>
        <sdpi-button id="searchDevicesBtn" onclick="searchForDevices(event)">Search for Devices</sdpi-button>
        <div id="scanStatus" class="scan-status">
            Scanning: <span id="currentIp">-</span>
        </div>
        <div id="terminalOutput" class="terminal-output">
            <!-- Hier werden gefundene Geräte sofort angezeigt -->
        </div>
    </sdpi-item>

    <script src="js/awtrix3.js"></script>
    <script src="js/ui/power-control.js"></script>
</body>
</html>
